
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        
            <title>Pitch Shifter</title>
        
        <meta name="viewport" content="initial-scale=1">

        <link href="./rsc/css/main.css?v=3" rel="stylesheet" type="text/css">

        <link rel="stylesheet" type="text/css" href="./lib/nouislider/nouislider.min.css">

        <script src="./lib/jquery/jquery.min.js"></script>

        <style type="text/css">
        .noUi-connect {
            background: rgb(56, 163, 235);
        }

        .clear2 {
          padding-top: 20px;
        }
        </style>

    </head>

    <body>



<script src='./lib/nouislider/nouislider.min.js'></script>
<!-- <script src="http://documentcloud.github.com/underscore/underscore.js"></script> -->

<div class="wrapper">
<div class="pitch-shifter" style="float:left;">
	<h2>Load Audio File<br />(mp3 or wav)</h2>
	<input autocomplete="off" id="audio-file" type="file" accept=".wav, .mp3" />

	<p class="clear"></p>

	<script>var is_playing;</script>

	<button id="play-pitchshifter" class="tuningButton">play</button>
	<!-- <button id="pause-pitchshifter" class="tuningButton button--pause">pause</button> -->
	<label for="save-output">
		Save output to downloadable file?
		<input type="checkbox" id='save-output'>
	</label>
  <div class="clear"></div>
	<p id="timing">
		<div class="timing">
			<span id="current-time">0:00</span>
			/
			<span id="total-time">0:00</span>
		</div>
		<span id='loading' style='display:none;'>Loading...</span>
	</p>

  <div id='play-slider' class="play-slider">
  </div>

	<div class="clear2"></div>

   <canvas class="visualizer" width="640" height="100"></canvas> 

   <!-- Toggle between sinewave and frequency bars -->
  <form class="controls">
      <div>
          <label for="visual">Visualizer setting</label>
          <select id="visual" name="visual">
              <option value="sinewave">Sinewave</option>
              <option value="frequencybars" selected>Frequency bars</option>
              <option value="off">Off</option>
          </select>
      </div>
  </form>

  <div class="slider-control">
    <h2>Volume</h2>
    <div class="vertical-slider" id="volume-slider"></div>
  </div>

  <div class="slider-control">
    <h2>Pitch</h2>
    <div class="vertical-slider pitch-slider"></div>
  </div>

  <div class="slider-control">
    <h2>Tempo<br>BPM = <span id="bpm-label">0</span></h2>
    <div class="vertical-slider tempo-slider"></div>
  </div>
  
  <div class="slider-control">
    <h2>Distortion</h2>
    <div class="vertical-slider" id="distortion-slider"></div>
  </div>

	<div class="clear"></div>


	<label class="semitone-shift-label">Shifted by <input id='semitones' type="text" value="0"> semitones<br />(shifting by one semitone is equivalent to shifting by 5.946%)</label>
	
	<div class="js-downloads-section" style='display:none;'>
		<h2>Recordings</h2>
		<ul id="recordingslist"></ul>
		
		<h2>Status Log</h2>
		<pre id="log"></pre>
	</div>
</div>

<div class="pitch-shifter" style="float:right;">
  <h2>Load Audio File<br />(mp3 or wav)</h2>
  <input autocomplete="off" id="audio-file2" type="file" accept=".wav, .mp3" />

  <p class="clear"></p>

  <script>var is_playing;</script>

  <button id="play-pitchshifter2" class="tuningButton">play</button>
  <!-- <button id="pause-pitchshifter2" class="tuningButton button--pause">pause</button> -->
  <label for="save-output2">
    Save output to downloadable file?
    <input type="checkbox" id='save-output2'>
  </label>
  <div class="clear"></div>

  <p id="timing2">
    <div class="timing">
      <span id="current-time2">0:00</span>
      /
      <span id="total-time2">0:00</span>
    </div>
    <span id='loading2' style='display:none;'>Loading...</span>
  </p>

  <div id='play-slider2' class="play-slider">
  </div>

  <div class="clear2"></div>

   <canvas class="visualizer2" width="640" height="100"></canvas> 

   <!-- Toggle between sinewave and frequency bars -->
  <form class="controls">
      <div>
          <label for="visual">Visualizer setting</label>
          <select id="visual2" name="visual">
              <option value="sinewave">Sinewave</option>
              <option value="frequencybars" selected>Frequency bars</option>
              <option value="off">Off</option>
          </select>
      </div>
  </form>

  <div class="slider-control">
    <h2>Volume</h2>
    <div class="vertical-slider" id="volume-slider2"></div>
  </div>

  <div class="slider-control">
    <h2>Pitch</h2>
    <div class="vertical-slider pitch-slider2"></div>
  </div>

  <div class="slider-control">
    <h2>Tempo<br>BPM = <span id="bpm-label2">0</span></h2>
    <div class="vertical-slider tempo-slider2"></div>
  </div>

  <div class="slider-control">
    <h2>Distortion</h2>
    <div class="vertical-slider" id="distortion-slider2"></div>
  </div>

  <div class="clear"></div>


  <label class="semitone-shift-label2">Shifted by <input id='semitones' type="text" value="0"> semitones<br />(shifting by one semitone is equivalent to shifting by 5.946%)</label>
  
  <div class="js-downloads-section" style='display:none;'>
    <h2>Recordings</h2>
    <ul id="recordingslist2"></ul>
    
    <h2>Status Log</h2>
    <pre id="log"></pre>
  </div>

</div>


  <script>
  function __log(e, data) {
    log.innerHTML += "\n" + e + " " + (data || '');
  }
  var audio_context;
  var recorder;
  function startUserMedia(stream) {
    // var input = audio_context.createMediaStreamSource(stream);
    var input = node;
    __log('Media stream created.');
    // Uncomment if you want the audio to feedback directly
    //input.connect(audio_context.destination);
    //__log('Input connected to audio context destination.');
    
    recorder = new Recorder(input);
    __log('Recorder initialised.');
  }

$("#save-output").click(function(){
	if ($("#save-output").prop("checked") == true){
		$(".js-downloads-section").css("display","block");
	} else {
		$(".js-downloads-section").css("display","none");;
	}
})
  </script>

<script src="./lib/recorder/recorder.js"></script>
<script src="./lib/soundtouch/st.min.js"></script>

<script src="./rsc/js/bpmCalc.js"></script>
<script src="./rsc/js/spectrogram.js"></script>
<script src="./rsc/js/track.js"></script>
<script src="./rsc/js/ui.js"></script>
</body>
</html>
